# STATISTICAL

global_mean_price_grain = {
	if = {
		limit = {
			has_global_variable = global_mean_price_grain
		}
		value = global_var:global_mean_price_grain
	}
}
global_mean_price_fish = {
	if = {
		limit = {
			has_global_variable = global_mean_price_fish
		}
		value = global_var:global_mean_price_fish
	}
}
global_mean_price_livestock = {
	if = {
		limit = {
			has_global_variable = global_mean_price_livestock
		}
		value = global_var:global_mean_price_livestock
	}
}
global_mean_price_vegetables = {
	if = {
		limit = {
			has_global_variable = global_mean_price_vegetables
		}
		value = global_var:global_mean_price_vegetables
	}
}
global_mean_price_temperate_fruit = {
	if = {
		limit = {
			has_global_variable = global_mean_price_temperate_fruit
		}
		value = global_var:global_mean_price_temperate_fruit
	}
}
global_mean_price_processed_foods = {
	if = {
		limit = {
			has_global_variable = global_mean_price_processed_foods
		}
		value = global_var:global_mean_price_processed_foods
	}
}
global_mean_price_clothing = {
	if = {
		limit = {
			has_global_variable = global_mean_price_clothing
		}
		value = global_var:global_mean_price_clothing
	}
}
global_mean_price_furniture = {
	if = {
		limit = {
			has_global_variable = global_mean_price_furniture
		}
		value = global_var:global_mean_price_furniture
	}
}
global_mean_price_pharmaceuticals = {
	if = {
		limit = {
			has_global_variable = global_mean_price_pharmaceuticals
		}
		value = global_var:global_mean_price_pharmaceuticals
	}
}
global_mean_price_coal = {
	if = {
		limit = {
			has_global_variable = global_mean_price_coal
		}
		value = global_var:global_mean_price_coal
	}
}
global_mean_price_whales = {
	if = {
		limit = {
			has_global_variable = global_mean_price_whales
		}
		value = global_var:global_mean_price_whales
	}
}
global_mean_price_alcohol = {
	if = {
		limit = {
			has_global_variable = global_mean_price_alcohol
		}
		value = global_var:global_mean_price_alcohol
	}
}
global_mean_price_gems = {
	if = {
		limit = {
			has_global_variable = global_mean_price_gems
		}
		value = global_var:global_mean_price_gems
	}
}
global_mean_price_opium = {
	if = {
		limit = {
			has_global_variable = global_mean_price_opium
		}
		value = global_var:global_mean_price_opium
	}
}
global_mean_price_tobacco = {
	if = {
		limit = {
			has_global_variable = global_mean_price_tobacco
		}
		value = global_var:global_mean_price_tobacco
	}
}
global_mean_price_chocolate = {
	if = {
		limit = {
			has_global_variable = global_mean_price_chocolate
		}
		value = global_var:global_mean_price_chocolate
	}
}
global_mean_price_coffee = {
	if = {
		limit = {
			has_global_variable = global_mean_price_coffee
		}
		value = global_var:global_mean_price_coffee
	}
}
global_mean_price_tea = {
	if = {
		limit = {
			has_global_variable = global_mean_price_tea
		}
		value = global_var:global_mean_price_tea
	}
}
global_mean_price_spices = {
	if = {
		limit = {
			has_global_variable = global_mean_price_spices
		}
		value = global_var:global_mean_price_spices
	}
}
global_mean_price_sugar = {
	if = {
		limit = {
			has_global_variable = global_mean_price_sugar
		}
		value = global_var:global_mean_price_sugar
	}
}
global_mean_price_luxury_clothing = {
	if = {
		limit = {
			has_global_variable = global_mean_price_luxury_clothing
		}
		value = global_var:global_mean_price_luxury_clothing
	}
}
global_mean_price_luxury_furniture = {
	if = {
		limit = {
			has_global_variable = global_mean_price_luxury_furniture
		}
		value = global_var:global_mean_price_luxury_furniture
	}
}
global_mean_price_glass = {
	if = {
		limit = {
			has_global_variable = global_mean_price_glass
		}
		value = global_var:global_mean_price_glass
	}
}
global_mean_price_motors = {
	if = {
		limit = {
			has_global_variable = global_mean_price_motors
		}
		value = global_var:global_mean_price_motors
	}
}
global_mean_price_fur = {
	if = {
		limit = {
			has_global_variable = global_mean_price_fur
		}
		value = global_var:global_mean_price_fur
	}
}
global_mean_price_industrial_fibres = {
	if = {
		limit = {
			has_global_variable = global_mean_price_industrial_fibres
		}
		value = global_var:global_mean_price_industrial_fibres
	}
}
global_mean_price_textile_fibres = {
	if = {
		limit = {
			has_global_variable = global_mean_price_textile_fibres
		}
		value = global_var:global_mean_price_textile_fibres
	}
}
global_mean_price_wool = {
	if = {
		limit = {
			has_global_variable = global_mean_price_wool
		}
		value = global_var:global_mean_price_wool
	}
}
global_mean_price_silk = {
	if = {
		limit = {
			has_global_variable = global_mean_price_silk
		}
		value = global_var:global_mean_price_silk
	}
}
global_mean_price_wood = {
	if = {
		limit = {
			has_global_variable = global_mean_price_wood
		}
		value = global_var:global_mean_price_wood
	}
}
global_mean_price_stone = {
	if = {
		limit = {
			has_global_variable = global_mean_price_stone
		}
		value = global_var:global_mean_price_stone
	}
}
global_mean_price_sulphur = {
	if = {
		limit = {
			has_global_variable = global_mean_price_sulphur
		}
		value = global_var:global_mean_price_sulphur
	}
}
global_mean_price_peat = {
	if = {
		limit = {
			has_global_variable = global_mean_price_peat
		}
		value = global_var:global_mean_price_peat
	}
}
global_mean_price_tin = {
	if = {
		limit = {
			has_global_variable = global_mean_price_tin
		}
		value = global_var:global_mean_price_tin
	}
}
global_mean_price_inorganic_compounds = {
	if = {
		limit = {
			has_global_variable = global_mean_price_inorganic_compounds
		}
		value = global_var:global_mean_price_inorganic_compounds
	}
}
global_mean_price_copper = {
	if = {
		limit = {
			has_global_variable = global_mean_price_copper
		}
		value = global_var:global_mean_price_copper
	}
}
global_mean_price_iron = {
	if = {
		limit = {
			has_global_variable = global_mean_price_iron
		}
		value = global_var:global_mean_price_iron
	}
}
global_mean_price_gold = {
	if = {
		limit = {
			has_global_variable = global_mean_price_gold
		}
		value = global_var:global_mean_price_gold
	}
}
global_mean_price_silver = {
	if = {
		limit = {
			has_global_variable = global_mean_price_silver
		}
		value = global_var:global_mean_price_silver
	}
}
global_mean_price_dye = {
	if = {
		limit = {
			has_global_variable = global_mean_price_dye
		}
		value = global_var:global_mean_price_dye
	}
}
global_mean_price_lead = {
	if = {
		limit = {
			has_global_variable = global_mean_price_lead
		}
		value = global_var:global_mean_price_lead
	}
}
global_mean_price_oil = {
	if = {
		limit = {
			has_global_variable = global_mean_price_oil
		}
		value = global_var:global_mean_price_oil
	}
}
global_mean_price_hardwood = {
	if = {
		limit = {
			has_global_variable = global_mean_price_hardwood
		}
		value = global_var:global_mean_price_hardwood
	}
}
global_mean_price_rubber = {
	if = {
		limit = {
			has_global_variable = global_mean_price_rubber
		}
		value = global_var:global_mean_price_rubber
	}
}
global_mean_price_salt = {
	if = {
		limit = {
			has_global_variable = global_mean_price_salt
		}
		value = global_var:global_mean_price_salt
	}
}
global_mean_price_electronics = {
	if = {
		limit = {
			has_global_variable = global_mean_price_electronics
		}
		value = global_var:global_mean_price_electronics
	}
}
global_mean_price_construction_materials = {
	if = {
		limit = {
			has_global_variable = global_mean_price_construction_materials
		}
		value = global_var:global_mean_price_construction_materials
	}
}
global_mean_price_steel = {
	if = {
		limit = {
			has_global_variable = global_mean_price_steel
		}
		value = global_var:global_mean_price_steel
	}
}
global_mean_price_bronze = {
	if = {
		limit = {
			has_global_variable = global_mean_price_bronze
		}
		value = global_var:global_mean_price_bronze
	}
}
global_mean_price_machine_parts = {
	if = {
		limit = {
			has_global_variable = global_mean_price_machine_parts
		}
		value = global_var:global_mean_price_machine_parts
	}
}
global_mean_price_chemicals = {
	if = {
		limit = {
			has_global_variable = global_mean_price_chemicals
		}
		value = global_var:global_mean_price_chemicals
	}
}
global_mean_price_naval_supplies = {
	if = {
		limit = {
			has_global_variable = global_mean_price_naval_supplies
		}
		value = global_var:global_mean_price_naval_supplies
	}
}
global_mean_price_steel_ships = {
	if = {
		limit = {
			has_global_variable = global_mean_price_steel_ships
		}
		value = global_var:global_mean_price_steel_ships
	}
}
global_mean_price_wooden_ships = {
	if = {
		limit = {
			has_global_variable = global_mean_price_wooden_ships
		}
		value = global_var:global_mean_price_wooden_ships
	}
}
global_mean_price_petrochemicals = {
	if = {
		limit = {
			has_global_variable = global_mean_price_petrochemicals
		}
		value = global_var:global_mean_price_petrochemicals
	}
}
global_mean_price_early_munitions = {
	if = {
		limit = {
			has_global_variable = global_mean_price_early_munitions
		}
		value = global_var:global_mean_price_early_munitions
	}
}
global_mean_price_late_munitions = {
	if = {
		limit = {
			has_global_variable = global_mean_price_late_munitions
		}
		value = global_var:global_mean_price_late_munitions
	}
}
global_mean_price_early_artillery = {
	if = {
		limit = {
			has_global_variable = global_mean_price_early_artillery
		}
		value = global_var:global_mean_price_early_artillery
	}
}
global_mean_price_late_artillery = {
	if = {
		limit = {
			has_global_variable = global_mean_price_late_artillery
		}
		value = global_var:global_mean_price_late_artillery
	}
}

# FUCTIONAL

PRICE_grain_demand_difference_raw = {
	# Scope: governorship

	# Total demand difference in the trade zone
	#if = {
	#	limit = { has_variable = trade_center }
	#	var:trade_center = {
	#		add = var:TZ_total_demand_difference	
	#	}
	#}
	###

	# Total demand difference globally
	#add = PRICE_grain_demand_diff_whole_world
	###

	# Total demand difference in all trade partner countries
	owner = {
		every_in_list = {
			variable = list_of_trade_partners_all_categories
			add = DEMAND_difference_country_grain
		}
	}
	###

	# Total demand difference in the internal trade scope
	var:internal_trade_scope = {

		if = { # Condition 1: is not federation customs union
			limit = {
				NOT = { has_variable = is_federation_scope }
			}
			every_governorships = {
				limit = {
					NOT = {has_variable = federation_customs_union }
				}
				add = DEMAND_difference_grain
			}
		}

		else = { # Condition 2: is federation customs union
			every_in_list = {
				variable = list_of_members
				every_governorships = {
					limit = {
						has_variable = federation_customs_union
					}
					add = DEMAND_difference_grain
				}
			}
		}

	}
	###

}

PRICE_grain_demand_difference_modifier = {
	if = {
		limit = {
			PRICE_grain_demand_difference_raw < 0
		}
		value = 1
		divide = PRICE_grain_demand_difference_raw
		multiply = 10000
	}
	else = {
		value = 1
		divide = PRICE_grain_demand_difference_raw
		add = 1
	}
}

PRICE_grain = {
	value = PRICE_grain_demand_difference_raw
	if = {
		limit = { PRICE_grain_demand_difference_raw < 0 }
		divide = PRICE_grain_demand_difference_modifier
	}
	else = {
		multiply = PRICE_grain_demand_difference_modifier
	}
}

PRICE_grain_demand_diff_whole_world = {
	# Scope: governorship
	every_trade_center = {
		add = var:TZ_total_demand_difference
	}
}

PRICE_global_mean_grain = {
  value = global_var:global_mean_price_grain
}
PRICE_global_mean_fish = {
  value = global_var:global_mean_price_fish
}
PRICE_global_mean_livestock = {
  value = global_var:global_mean_price_livestock
}
PRICE_global_mean_vegetables = {
  value = global_var:global_mean_price_vegetables
}
PRICE_global_mean_tropical_fruit = {
  value = global_var:global_mean_price_tropical_fruit
}
PRICE_global_mean_mediterranean_fruit = {
  value = global_var:global_mean_price_mediterranean_fruit
}
PRICE_global_mean_temperate_fruit = {
  value = global_var:global_mean_price_temperate_fruit
}
PRICE_global_mean_processed_foods = {
  value = global_var:global_mean_price_processed_foods
}
PRICE_global_mean_clothing = {
  value = global_var:global_mean_price_clothing
}
PRICE_global_mean_furniture = {
  value = global_var:global_mean_price_furniture
}
PRICE_global_mean_pharmaceuticals = {
  value = global_var:global_mean_price_pharmaceuticals
}
PRICE_global_mean_coal = {
  value = global_var:global_mean_price_coal
}
PRICE_global_mean_whales = {
  value = global_var:global_mean_price_whales
}
PRICE_global_mean_alcohol = {
  value = global_var:global_mean_price_alcohol
}
PRICE_global_mean_gems = {
  value = global_var:global_mean_price_gems
}
PRICE_global_mean_opium = {
  value = global_var:global_mean_price_opium
}
PRICE_global_mean_tobacco = {
  value = global_var:global_mean_price_tobacco
}
PRICE_global_mean_chocolate = {
  value = global_var:global_mean_price_chocolate
}
PRICE_global_mean_coffee = {
  value = global_var:global_mean_price_coffee
}
PRICE_global_mean_tea = {
  value = global_var:global_mean_price_tea
}
PRICE_global_mean_spices = {
  value = global_var:global_mean_price_spices
}
PRICE_global_mean_sugar = {
  value = global_var:global_mean_price_sugar
}
PRICE_global_mean_luxury_clothing = {
  value = global_var:global_mean_price_luxury_clothing
}
PRICE_global_mean_luxury_furniture = {
  value = global_var:global_mean_price_luxury_furniture
}
PRICE_global_mean_glass = {
  value = global_var:global_mean_price_glass
}
PRICE_global_mean_motors = {
  value = global_var:global_mean_price_motors
}
PRICE_global_mean_fur = {
  value = global_var:global_mean_price_fur
}
PRICE_global_mean_industrial_fibres = {
  value = global_var:global_mean_price_industrial_fibres
}
PRICE_global_mean_textile_fibres = {
  value = global_var:global_mean_price_textile_fibres
}
PRICE_global_mean_wool = {
  value = global_var:global_mean_price_wool
}
PRICE_global_mean_silk = {
  value = global_var:global_mean_price_silk
}
PRICE_global_mean_wood = {
  value = global_var:global_mean_price_wood
}
PRICE_global_mean_stone = {
  value = global_var:global_mean_price_stone
}
PRICE_global_mean_sulphur = {
  value = global_var:global_mean_price_sulphur
}
PRICE_global_mean_peat = {
  value = global_var:global_mean_price_peat
}
PRICE_global_mean_tin = {
  value = global_var:global_mean_price_tin
}
PRICE_global_mean_inorganic_compounds = {
  value = global_var:global_mean_price_inorganic_compounds
}
PRICE_global_mean_copper = {
  value = global_var:global_mean_price_copper
}
PRICE_global_mean_iron = {
  value = global_var:global_mean_price_iron
}
PRICE_global_mean_gold = {
  value = global_var:global_mean_price_gold
}
PRICE_global_mean_silver = {
  value = global_var:global_mean_price_silver
}
PRICE_global_mean_dye = {
  value = global_var:global_mean_price_dye
}
PRICE_global_mean_lead = {
  value = global_var:global_mean_price_lead
}
PRICE_global_mean_oil = {
  value = global_var:global_mean_price_oil
}
PRICE_global_mean_hardwood = {
  value = global_var:global_mean_price_hardwood
}
PRICE_global_mean_rubber = {
  value = global_var:global_mean_price_rubber
}
PRICE_global_mean_salt = {
  value = global_var:global_mean_price_salt
}
PRICE_global_mean_electronics = {
  value = global_var:global_mean_price_electronics
}
PRICE_global_mean_construction_materials = {
  value = global_var:global_mean_price_construction_materials
}
PRICE_global_mean_steel = {
  value = global_var:global_mean_price_steel
}
PRICE_global_mean_bronze = {
  value = global_var:global_mean_price_bronze
}
PRICE_global_mean_machine_parts = {
  value = global_var:global_mean_price_machine_parts
}
PRICE_global_mean_chemicals = {
  value = global_var:global_mean_price_chemicals
}
PRICE_global_mean_naval_supplies = {
  value = global_var:global_mean_price_naval_supplies
}
PRICE_global_mean_steel_ships = {
  value = global_var:global_mean_price_steel_ships
}
PRICE_global_mean_wooden_ships = {
  value = global_var:global_mean_price_wooden_ships
}
PRICE_global_mean_petrochemicals = {
  value = global_var:global_mean_price_petrochemicals
}
PRICE_global_mean_early_munitions = {
  value = global_var:global_mean_price_early_munitions
}
PRICE_global_mean_late_munitions = {
  value = global_var:global_mean_price_late_munitions
}
PRICE_global_mean_early_artillery = {
  value = global_var:global_mean_price_early_artillery
}
PRICE_global_mean_late_artillery = {
  value = global_var:global_mean_price_late_artillery
}